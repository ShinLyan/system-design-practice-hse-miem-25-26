# Домашнее задание №1
## Контекст
В demo-app-1 находится директория k6/scripts.

В директории находится файл load-script.js - скрипт нагрузочного тестирования на k6 (https://k6.io/). Этот скрипт имитирует работу пользователей с API заказов.

На занятии №4 я показывал и рассказывал, **что такое нагрузочное тестирование, зачем оно нужно в контексте системного дизайна и как его сделать на коленке.**

## О чем скрипт
### Сценарий
80% POST запросы - пользователи создают заказы
20% GET запросы - пользователи просматривают заказы
Каждый виртуальный пользователь делает запросы с небольшой паузой.

### Что хотим проверить
* Как система обрабатывает резкие скачки нагрузки?
* Восстанавливается ли после пика? Приходит ли в нормальное состояние?
* Как ведет при плавном изменении нагрузки?

## Цель HW1
Провести нагрузочное тестирование, проанализировать метрики и найти "узкие места" (ботлнеки) в системе.
Мне важно, чтобы вы:
1. Еще раз посмотрели на структуру проекта - на то как взаимодействуют компоненты друг с другом.
2. Осознали, зачем нужен NGINX, как подключается мониторинг, чтобы на интервью пояснить за них.
3. Посмотрели, как можно безболезненно развернуть локально стандартное веб-приложение.
4. Подумали над метриками, над тем, что в системе важно, а что нет.

## TO DO
1. Выполните действия из README.md в demo-app-1
2. В вашем репозитории добавьте файл hw1/HW_1_SOLUTION.md
### Этап №1: Думаем и проектируем
3. Еще раз присмотритесь к архитектуре, коду приложения и проанализируйте - какие метрики мы хотим отслеживать, чтобы понять, что происходит с нашей системой? Вкратце опишите ваши мысли в HW_1_SOLUTION.md
4. Если каких-то метрик не хватает по вашему мнению, пожалуйста, добавьте их в приложение (под звездочкой).
### Этап №2: Стреляем
5. Если вам не нравится k6, используйте JMeter или Locust или Яндекс.Танк. Но нам нужно пострелять. Можно использовать LLM.
Стреляем с разными сценариями:
* Сценарий "Шторм" - резкий пик нагрузки (1000 пользователей за 10s)
* Сценарий "Волна" - плавное нарастание (0 к 500 пользователей за 2 минуты)
* Сценарий "Ваша модификация" - измените существующий скрипт каким-нибудь способом. Сделайте себе заметки - в чем фишка вашего сценария? Может, вы хотите проверить что-то другое в нашем приложении или хотите задать нагрузку иного характера?
6. Вкратце опишите ваши мысли и сценарии в HW_1_SOLUTION.md
### Этап №3: Анализируем
7. Проанализируйте дашборды после/во время каждого сценария и найдите на графиках "инсайты", которые помогут сделать выводы.
Например, при резком скачке нагрузки у нас отваливается База Данных или максимальная нагрузка приложения - 20 000 RPS на такой-то конфигурации или при максимальной нагрузке у нас 50 коннектов к базе или латенси такой-то в 95-перцентиле.
8. Свяжите анализ с этапом №1 и напишите в HW_1_SOLUTION.md ваши мысли.
### Этап №4: Решения
9. Я буду признателен, если вы предложите решения - как справится с той или иной нагрузкой. 


## Как сдавать
1. Пришлите в телеграм @nikolaysavelev ссылку на ваш репозиторий
2. В репозитории должен быть проект, новые скрипты для НТ, в директории hw1 должен быть файл HW_1_SOLUTION.md. Формат отчета свободный.


## Критерии оценки
1. Если смогли запустить и пострелять - уже отлично!
2. Если смогли спроектировать метрики и разобраться зачем и что считать, куда и как стрелять - это супер!
3. Если смогли проанализировать и обработать эту информацию, сформировать гипотезы и предложить решения - это вышка.